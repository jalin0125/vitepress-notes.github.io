import{_ as s,c as a,o as n,a as l}from"./app.b454e50a.js";const d=JSON.parse('{"title":"Vuex","description":"","frontmatter":{},"headers":[{"level":2,"title":"èµ·æ­¥","slug":"èµ·æ­¥","link":"#èµ·æ­¥","children":[]},{"level":2,"title":"state è®¿é—®çŠ¶æ€å¯¹è±¡","slug":"state-è®¿é—®çŠ¶æ€å¯¹è±¡","link":"#state-è®¿é—®çŠ¶æ€å¯¹è±¡","children":[]},{"level":2,"title":"Mutations ä¿®æ”¹çŠ¶æ€","slug":"mutations-ä¿®æ”¹çŠ¶æ€","link":"#mutations-ä¿®æ”¹çŠ¶æ€","children":[]},{"level":2,"title":"getters è®¡ç®—è¿‡æ»¤æ“ä½œ","slug":"getters-è®¡ç®—è¿‡æ»¤æ“ä½œ","link":"#getters-è®¡ç®—è¿‡æ»¤æ“ä½œ","children":[]},{"level":2,"title":"actions å¼‚æ­¥ä¿®æ”¹çŠ¶æ€","slug":"actions-å¼‚æ­¥ä¿®æ”¹çŠ¶æ€","link":"#actions-å¼‚æ­¥ä¿®æ”¹çŠ¶æ€","children":[]},{"level":2,"title":"module æ¨¡å—ç»„","slug":"module-æ¨¡å—ç»„","link":"#module-æ¨¡å—ç»„","children":[]}],"relativePath":"03.tools-framework/04.vue/04.Vuex.md"}'),p={name:"03.tools-framework/04.vue/04.Vuex.md"},o=l(`<h1 id="vuex" tabindex="-1">Vuex <a class="header-anchor" href="#vuex">Â¶</a></h1><p><a href="https://vuex.vuejs.org/zh/" target="_blank" rel="noreferrer">vuex</a>æ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºvue.jsè®¾è®¡çš„é›†ä¸­å¼çŠ¶æ€ç®¡ç†æ¶æ„ã€‚</p><p>çŠ¶æ€ï¼Ÿæˆ‘æŠŠå®ƒç†è§£ä¸ºåœ¨dataä¸­çš„å±æ€§éœ€è¦å…±äº«ç»™å…¶ä»–vueç»„ä»¶ä½¿ç”¨çš„éƒ¨åˆ†ï¼Œå°±å«åšçŠ¶æ€ã€‚ç®€å•çš„è¯´å°±æ˜¯dataä¸­éœ€è¦å…±ç”¨çš„å±æ€§ã€‚æ¯”å¦‚ï¼šæˆ‘ä»¬æœ‰å‡ ä¸ªé¡µé¢è¦æ˜¾ç¤ºç”¨æˆ·åç§°å’Œç”¨æˆ·ç­‰çº§ï¼Œæˆ–è€…æ˜¾ç¤ºç”¨æˆ·çš„åœ°ç†ä½ç½®ã€‚å¦‚æœæˆ‘ä»¬ä¸æŠŠè¿™äº›å±æ€§è®¾ç½®ä¸ºçŠ¶æ€ï¼Œé‚£æ¯ä¸ªé¡µé¢é‡åˆ°åï¼Œéƒ½ä¼šåˆ°æœåŠ¡å™¨è¿›è¡ŒæŸ¥æ‰¾è®¡ç®—ï¼Œè¿”å›åå†æ˜¾ç¤ºã€‚</p><p>å››å¤§é‡‘åˆšï¼š <code>State</code> <code>Mutations</code> <code>Actions</code> <code>Getters</code></p><p>å››å¤§é‡‘åˆšå¯¹äºçš„è¾…åŠ©å‡½æ•°ï¼š <code>mapState</code> <code>mapGetters</code> <code>mapActions</code> <code>mapMutations</code></p><h2 id="èµ·æ­¥" tabindex="-1">èµ·æ­¥ <a class="header-anchor" href="#èµ·æ­¥">Â¶</a></h2><p>ï¼ˆ1ï¼‰åˆ©ç”¨<code>npm</code>åŒ…ç®¡ç†å·¥å…·ï¼Œè¿›è¡Œå®‰è£… <code>vuex</code>ã€‚åœ¨æ§åˆ¶å‘½ä»¤è¡Œä¸­è¾“å…¥ä¸‹è¾¹çš„å‘½ä»¤å°±å¯ä»¥äº†ã€‚</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vuex</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--save</span></span>
<span class="line"></span></code></pre></div><p>éœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œä¸€å®šè¦åŠ ä¸Š <code>â€“save</code>ï¼Œå› ä¸ºä½ è¿™ä¸ªåŒ…æˆ‘ä»¬åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ˜¯è¦ä½¿ç”¨çš„ã€‚</p><p>ï¼ˆ2ï¼‰æ–°å»ºä¸€ä¸ª<code>vuex</code>æ–‡ä»¶å¤¹ï¼ˆè¿™ä¸ªä¸æ˜¯å¿…é¡»çš„ï¼‰ï¼Œå¹¶åœ¨æ–‡ä»¶å¤¹ä¸‹æ–°å»º<code>store.js</code>æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­å¼•å…¥æˆ‘ä»¬çš„<code>vue</code>å’Œ<code>vuex</code>ã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> Vue </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> Vuex </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vuex</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>ï¼ˆ3ï¼‰ä½¿ç”¨æˆ‘ä»¬<code>vuex</code>ï¼Œå¼•å…¥ä¹‹åç”¨<code>Vue.use</code>è¿›è¡Œå¼•ç”¨ã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Vue</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">use</span><span style="color:#A6ACCD;">(Vuex)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>ğŸŒ°æ —å­</p><p>å…ˆå£°æ˜ä¸€ä¸ªstateçš„countçŠ¶æ€ï¼Œåœ¨é¡µé¢ä¸­ä½¿ç”¨æ˜¾ç¤ºè¿™ä¸ª<code>count</code>ï¼Œç„¶åå¯ä»¥åˆ©ç”¨æŒ‰é’®è¿›è¡ŒåŠ å‡ã€‚</p><p>ï¼ˆ1ï¼‰ç°åœ¨æˆ‘ä»¬<code>store.js</code>æ–‡ä»¶é‡Œå¢åŠ ä¸€ä¸ªå¸¸é‡å¯¹è±¡ã€‚<code>store.js</code>æ–‡ä»¶å°±æ˜¯æˆ‘ä»¬åœ¨å¼•å…¥<code>vuex</code>æ—¶çš„é‚£ä¸ªæ–‡ä»¶ã€‚</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> state </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">count</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>ï¼ˆ2ï¼‰ç”¨<code>export default</code> å°è£…ä»£ç ï¼Œè®©å¤–éƒ¨å¯ä»¥å¼•ç”¨ã€‚</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> Vuex</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Store</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    state</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>ï¼ˆ3ï¼‰æ–°å»ºä¸€ä¸ª<code>vue</code>çš„æ¨¡æ¿ï¼Œä½ç½®åœ¨<code>components</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œåå­—å«<code>count.vue</code>ã€‚åœ¨æ¨¡æ¿ä¸­æˆ‘ä»¬å¼•å…¥æˆ‘ä»¬åˆšå»ºçš„<code>store.js</code>æ–‡ä»¶ï¼Œå¹¶åœ¨æ¨¡æ¿ä¸­ç”¨<code>\\{\\{$store.state.count\\}\\}</code>è¾“å‡ºcount çš„å€¼ã€‚</p><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h2</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">{{msg}}</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h2</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">hr</span><span style="color:#89DDFF;">/&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h3</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">{{$store.state.count}}</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h3</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> store </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/vuex/store</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">data</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            msg</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello Vuex</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    store</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>ï¼ˆ4ï¼‰åœ¨<code>store.js</code>æ–‡ä»¶ä¸­åŠ å…¥ä¸¤ä¸ªæ”¹å˜stateçš„æ–¹æ³•ã€‚</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> mutations </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">add</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">state</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">++;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">reduce</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">state</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">--;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> Vuex</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Store</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    state</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> mutations</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>è¿™é‡Œçš„mutationsæ˜¯å›ºå®šçš„å†™æ³•ï¼Œæ„æ€æ˜¯æ”¹å˜çš„ï¼Œæˆ‘ä»¬è¦æ”¹å˜stateçš„æ•°å€¼çš„æ–¹æ³•ï¼Œå¿…é¡»å†™åœ¨mutationsé‡Œã€‚</p><p>ï¼ˆ5ï¼‰åœ¨<code>count.vue</code>æ¨¡æ¿ä¸­åŠ å…¥ä¸¤ä¸ªæŒ‰é’®ï¼Œå¹¶è°ƒç”¨mutationsä¸­çš„æ–¹æ³•ã€‚</p><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;button @click=&quot;$store.commit(&#39;add&#39;)&quot;&gt;+&lt;/button&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;button @click=&quot;$store.commit(&#39;reduce&#39;)&quot;&gt;-&lt;/button&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="state-è®¿é—®çŠ¶æ€å¯¹è±¡" tabindex="-1"><code>state</code> è®¿é—®çŠ¶æ€å¯¹è±¡ <a class="header-anchor" href="#state-è®¿é—®çŠ¶æ€å¯¹è±¡">Â¶</a></h2><p>çŠ¶æ€å¯¹è±¡èµ‹å€¼ç»™å†…éƒ¨å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æŠŠ<code>stroe.js</code>ä¸­çš„å€¼ï¼Œèµ‹å€¼ç»™æˆ‘ä»¬æ¨¡æ¿é‡Œ<code>data</code>ä¸­çš„å€¼ã€‚</p><p><strong>1ã€é€šè¿‡ <code>computed</code> çš„è®¡ç®—å±æ€§ç›´æ¥èµ‹å€¼</strong></p><p><code>computed</code>å±æ€§å¯ä»¥åœ¨è¾“å‡ºå‰ï¼Œå¯¹dataä¸­çš„å€¼è¿›è¡Œæ”¹å˜ï¼Œæˆ‘ä»¬å°±åˆ©ç”¨è¿™ç§ç‰¹æ€§æŠŠ<code>store.js</code>ä¸­çš„stateå€¼èµ‹å€¼ç»™æˆ‘ä»¬æ¨¡æ¿ä¸­çš„dataå€¼ã€‚</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">computed</span><span style="color:#89DDFF;">:{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">count</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">$store</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ <code>return this.$store.state.count</code> è¿™ä¸€å¥ï¼Œä¸€å®šè¦å†™ <code>this</code>ï¼Œè¦ä¸ä½ ä¼šæ‰¾ä¸åˆ° <code>$store</code> çš„ã€‚è¿™ç§å†™æ³•å¾ˆå¥½ç†è§£ï¼Œä½†æ˜¯å†™èµ·æ¥æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œé‚£æˆ‘ä»¬æ¥çœ‹çœ‹ç¬¬äºŒç§å†™æ³•ã€‚</p><p><strong>2ã€é€šè¿‡ <code>mapState</code> çš„å¯¹è±¡æ¥èµ‹å€¼</strong></p><p>æˆ‘ä»¬é¦–å…ˆè¦ç”¨importå¼•å…¥<code>mapState</code>ã€‚</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">mapState</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vuex</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>ç„¶åè¿˜åœ¨<code>computed</code>è®¡ç®—å±æ€§é‡Œå†™å¦‚ä¸‹ä»£ç ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">computed</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mapState</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">count</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">state</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">count</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<code>ES6</code>çš„ç®­å¤´å‡½æ•°æ¥ç»™<code>count</code>èµ‹å€¼ã€‚</p><p><strong>3ã€é€šè¿‡ <code>mapState</code> çš„æ•°ç»„æ¥èµ‹å€¼</strong></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">computed</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mapState</span><span style="color:#A6ACCD;">([</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">count</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">])</span></span>
<span class="line"></span></code></pre></div><p>è¿™ä¸ªç®—æ˜¯æœ€ç®€å•çš„å†™æ³•äº†ï¼Œåœ¨å®é™…é¡¹ç›®å¼€å‘å½“ä¸­ä¹Ÿç»å¸¸è¿™æ ·ä½¿ç”¨ã€‚</p><h2 id="mutations-ä¿®æ”¹çŠ¶æ€" tabindex="-1"><code>Mutations</code> ä¿®æ”¹çŠ¶æ€ <a class="header-anchor" href="#mutations-ä¿®æ”¹çŠ¶æ€">Â¶</a></h2><p>**1ã€<code>$store.commit()</code> **</p><p><code>Vuex</code>æä¾›äº†<code>commit</code>æ–¹æ³•æ¥ä¿®æ”¹çŠ¶æ€ï¼Œæˆ‘ä»¬ç²˜è´´å‡ºç¬¬ä¸€èŠ‚è¯¾çš„ä»£ç å†…å®¹ï¼Œç®€å•å›é¡¾ä¸€ä¸‹ï¼Œæˆ‘ä»¬åœ¨<code>button</code>ä¸Šçš„ä¿®æ”¹æ–¹æ³•ã€‚</p><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">click</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">$store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">commit</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">add</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">+</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">click</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">$store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">commit</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">reduce</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">-</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p><code>store.js</code>æ–‡ä»¶ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> mutations </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">add</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">state</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">++;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">reduce</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">state</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">--;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><strong>2ã€ä¼ å€¼</strong></p><p>è¿™åªæ˜¯ä¸€ä¸ªæœ€ç®€å•çš„ä¿®æ”¹çŠ¶æ€çš„æ“ä½œï¼Œåœ¨å®é™…é¡¹ç›®ä¸­æˆ‘ä»¬å¸¸å¸¸éœ€è¦åœ¨ä¿®æ”¹çŠ¶æ€æ—¶ä¼ å€¼ã€‚æ¯”å¦‚ä¸Šè¾¹çš„ä¾‹å­ï¼Œæ˜¯æˆ‘ä»¬æ¯æ¬¡åªåŠ 1ï¼Œè€Œç°åœ¨æˆ‘ä»¬è¦é€šè¿‡æ‰€ä¼ çš„å€¼è¿›è¡Œç›¸åŠ ã€‚å…¶å®æˆ‘ä»¬åªéœ€è¦åœ¨<code>Mutations</code>é‡Œå†åŠ ä¸Šä¸€ä¸ªå‚æ•°ï¼Œå¹¶åœ¨<code>commit</code>çš„æ—¶å€™ä¼ é€’å°±å°±å¯ä»¥äº†ã€‚æˆ‘ä»¬æ¥çœ‹å…·ä½“ä»£ç ï¼š</p><p>ç°åœ¨<code>store.js</code>æ–‡ä»¶é‡Œç»™<code>add</code>æ–¹æ³•åŠ ä¸Šä¸€ä¸ªå‚æ•°nã€‚æ·»åŠ çš„åœ°æ–¹æˆ‘å·²ç»æ ‡é»„äº†ã€‚</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> mutations </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">add</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">state</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">n</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">count</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">n</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">reduce</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">state</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">--;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>åœ¨<code>Count.vue</code>é‡Œä¿®æ”¹æŒ‰é’®çš„<code>commit()</code>æ–¹æ³•ä¼ é€’çš„å‚æ•°ï¼Œæˆ‘ä»¬ä¼ é€’10ï¼Œæ„æ€å°±æ˜¯æ¯æ¬¡åŠ 10.</p><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;button @click=&quot;$store.commit(&#39;add&#39;, 10)&quot;&gt;+&lt;/button&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;button @click=&quot;$store.commit(&#39;reduce&#39;)&quot;&gt;-&lt;/button&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>è¿™æ ·ä¸¤ä¸ªç®€å•çš„ä¿®æ”¹æˆ‘ä»¬å°±å®Œæˆäº†ä¼ å€¼ã€‚</p><p><strong>3ã€æ¨¡æ¿è·å– <code>Mutations</code> æ–¹æ³•</strong></p><p>å®é™…å¼€å‘ä¸­æˆ‘ä»¬ä¹Ÿä¸å–œæ¬¢çœ‹åˆ°<code>$store.commit( )</code>è¿™æ ·çš„æ–¹æ³•å‡ºç°ï¼Œæˆ‘ä»¬å¸Œæœ›è·Ÿè°ƒç”¨æ¨¡æ¿é‡Œçš„æ–¹æ³•ä¸€æ ·è°ƒç”¨ã€‚</p><p>ä¾‹å¦‚ï¼š<code>@click=â€reduceâ€</code> å°±å’Œæ²¡å¼•ç”¨<code>vuex</code>æ’ä»¶ä¸€æ ·ã€‚</p><p>è¦è¾¾åˆ°è¿™ç§å†™æ³•ï¼Œåªéœ€è¦ç®€å•çš„ä¸¤éƒ¨å°±å¯ä»¥äº†ï¼š</p><p>ï¼ˆ1ï¼‰åœ¨æ¨¡æ¿<code>count.vue</code>é‡Œç”¨import å¼•å…¥æˆ‘ä»¬çš„<code>mapMutations</code>ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">mapState</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">mapMutations</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vuex</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>ï¼ˆ2ï¼‰åœ¨æ¨¡æ¿çš„<code>&lt;script&gt;</code>æ ‡ç­¾é‡Œæ·»åŠ methodså±æ€§ï¼Œå¹¶åŠ å…¥<code>mapMutations</code></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">methods</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;">mapMutations</span><span style="color:#A6ACCD;">([</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">add</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">reduce</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">])</span></span>
<span class="line"></span></code></pre></div><p>é€šè¿‡ä¸Šè¾¹ä¸¤éƒ¨ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥åœ¨æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨æˆ‘ä»¬çš„reduceæˆ–è€…addæ–¹æ³•äº†ï¼Œå°±åƒä¸‹é¢è¿™æ ·ã€‚</p><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">click</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">reduce</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">-</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="getters-è®¡ç®—è¿‡æ»¤æ“ä½œ" tabindex="-1"><code>getters</code> è®¡ç®—è¿‡æ»¤æ“ä½œ <a class="header-anchor" href="#getters-è®¡ç®—è¿‡æ»¤æ“ä½œ">Â¶</a></h2><p><code>getters</code>ä»è¡¨é¢æ˜¯è·å¾—çš„æ„æ€ï¼Œå¯ä»¥æŠŠä»–çœ‹ä½œåœ¨è·å–æ•°æ®ä¹‹å‰è¿›è¡Œçš„ä¸€ç§å†ç¼–è¾‘,ç›¸å½“äºå¯¹æ•°æ®çš„ä¸€ä¸ªè¿‡æ»¤å’ŒåŠ å·¥ã€‚ä½ å¯ä»¥æŠŠå®ƒçœ‹ä½œ<code>store.js</code>çš„è®¡ç®—å±æ€§ã€‚</p><p><strong>1ã€gettersåŸºæœ¬ç”¨æ³•ï¼š</strong></p><p>æ¯”å¦‚æˆ‘ä»¬ç°åœ¨è¦å¯¹<code>store.js</code>æ–‡ä»¶ä¸­çš„<code>count</code>è¿›è¡Œä¸€ä¸ªè®¡ç®—å±æ€§çš„æ“ä½œï¼Œå°±æ˜¯åœ¨å®ƒè¾“å‡ºå‰ï¼Œç»™å®ƒåŠ ä¸Š100.</p><p>æˆ‘ä»¬é¦–å…ˆè¦åœ¨<code>store.js</code>é‡Œç”¨<code>const</code>å£°æ˜æˆ‘ä»¬çš„<code>getters</code>å±æ€§ã€‚</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> getters </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">count</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">state</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">count</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">100</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>å†™å¥½äº†<code>gettters</code>ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨<code>Vuex.Store()</code>é‡Œå¼•å…¥ï¼Œç”±äºä¹‹å‰æˆ‘ä»¬å·²ç»å¼•å…¥äº†<code>state</code>ç›’<code>mutations</code>ï¼Œæ‰€ä»¥å¼•å…¥é‡Œæœ‰ä¸‰ä¸ªå¼•å…¥å±æ€§ã€‚ä»£ç å¦‚ä¸‹ï¼Œ</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> Vuex</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Store</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    state</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> mutations</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> getters</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>åœ¨<code>store.js</code>é‡Œçš„é…ç½®ç®—æ˜¯å®Œæˆäº†ï¼Œæˆ‘ä»¬éœ€è¦åˆ°æ¨¡æ¿é¡µå¯¹<code>computed</code>è¿›è¡Œé…ç½®ã€‚åœ¨<code>vue</code> çš„æ„é€ å™¨é‡Œè¾¹åªèƒ½æœ‰ä¸€ä¸ª<code>computed</code>å±æ€§ï¼Œå¦‚æœä½ å†™å¤šä¸ªï¼Œåªæœ‰æœ€åä¸€ä¸ª<code>computed</code>å±æ€§å¯ç”¨ï¼Œæ‰€ä»¥è¦å¯¹ä¸ŠèŠ‚è¯¾å†™çš„<code>computed</code>å±æ€§è¿›è¡Œä¸€ä¸ªæ”¹é€ ã€‚æ”¹é€ æ—¶æˆ‘ä»¬ä½¿ç”¨<code>ES6</code>ä¸­çš„å±•å¼€è¿ç®—ç¬¦â€â€¦â€ã€‚</p><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">mapState</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vuex</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">computed</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">...</span><span style="color:#82AAFF;">mapState</span><span style="color:#A6ACCD;">([</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">count</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">count</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">$store</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">getters</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ å†™äº†è¿™ä¸ªé…ç½®åï¼Œåœ¨æ¯æ¬¡count çš„å€¼å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œéƒ½ä¼šè¿›è¡ŒåŠ 100çš„æ“ä½œã€‚</p><p><strong>2ã€ç”¨<code>mapGetters</code>ç®€åŒ–æ¨¡æ¿å†™æ³•ï¼š</strong></p><p>æˆ‘ä»¬éƒ½çŸ¥é“stateå’Œmutationséƒ½æœ‰mapçš„å¼•ç”¨æ–¹æ³•æŠŠæˆ‘ä»¬æ¨¡æ¿ä¸­çš„ç¼–ç è¿›è¡Œç®€åŒ–ï¼Œæˆ‘ä»¬çš„gettersä¹Ÿæ˜¯æœ‰çš„ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä»£ç ã€‚</p><p>ï¼ˆ1ï¼‰é¦–å…ˆç”¨importå¼•å…¥æˆ‘ä»¬çš„<code>mapGetters</code></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">mapState</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">mapMutations</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">mapGetters</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vuex</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>ï¼ˆ2ï¼‰åœ¨computedå±æ€§ä¸­åŠ å…¥<code>mapGetters</code></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">...</span><span style="color:#82AAFF;">mapGetters</span><span style="color:#A6ACCD;">([</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">count</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">])</span></span>
<span class="line"></span></code></pre></div><h2 id="actions-å¼‚æ­¥ä¿®æ”¹çŠ¶æ€" tabindex="-1"><code>actions</code> å¼‚æ­¥ä¿®æ”¹çŠ¶æ€ <a class="header-anchor" href="#actions-å¼‚æ­¥ä¿®æ”¹çŠ¶æ€">Â¶</a></h2><p><code>actions</code> å’Œä¹‹å‰è®²çš„ <code>Mutations</code> åŠŸèƒ½åŸºæœ¬ä¸€æ ·ï¼Œä¸åŒç‚¹æ˜¯ï¼Œactionsæ˜¯å¼‚æ­¥çš„æ”¹å˜stateçŠ¶æ€ï¼Œè€ŒMutationsæ˜¯åŒæ­¥æ”¹å˜çŠ¶æ€ã€‚</p><p><strong>åœ¨store.jsä¸­å£°æ˜actions</strong></p><p><code>actions</code> æ˜¯å¯ä»¥è°ƒç”¨ <code>Mutations</code> é‡Œçš„æ–¹æ³•çš„ï¼Œæˆ‘ä»¬è¿˜æ˜¯ç»§ç»­åœ¨ä¸ŠèŠ‚è¯¾çš„ä»£ç åŸºç¡€ä¸Šè¿›è¡Œå­¦ä¹ ï¼Œåœ¨actionsé‡Œè°ƒç”¨addå’Œreduceä¸¤ä¸ªæ–¹æ³•ã€‚</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> actions </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">addAction</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">commit</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">add</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">10</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">reduceAction</span><span style="color:#89DDFF;">({</span><span style="color:#A6ACCD;font-style:italic;">commit</span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">commit</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">reduce</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>åœ¨actionsé‡Œå†™äº†ä¸¤ä¸ªæ–¹æ³•<code>addAction</code>å’Œ<code>reduceAction</code>ï¼Œåœ¨æ–¹æ³•ä½“é‡Œï¼Œæˆ‘ä»¬éƒ½ç”¨commitè°ƒç”¨äº†Mutationsé‡Œè¾¹çš„æ–¹æ³•ã€‚ç»†å¿ƒçš„å°ä¼™ä¼´ä¼šå‘ç°è¿™ä¸¤ä¸ªæ–¹æ³•ä¼ é€’çš„å‚æ•°ä¹Ÿä¸ä¸€æ ·ã€‚</p><ul><li><code>context</code>ï¼šä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œè¿™é‡Œä½ å¯ä»¥ç†è§£ç§°storeæœ¬èº«ã€‚</li><li><code>{commit}</code>ï¼šç›´æ¥æŠŠcommitå¯¹è±¡ä¼ é€’è¿‡æ¥ï¼Œå¯ä»¥è®©æ–¹æ³•ä½“é€»è¾‘å’Œä»£ç æ›´æ¸…æ™°æ˜äº†ã€‚</li></ul><p><strong>æ¨¡æ¿ä¸­çš„ä½¿ç”¨</strong></p><p>æˆ‘ä»¬éœ€è¦åœ¨<code>count.vue</code>æ¨¡æ¿ä¸­ç¼–å†™ä»£ç ï¼Œè®©actionsç”Ÿæ•ˆã€‚æˆ‘ä»¬å…ˆå¤åˆ¶ä¸¤ä¸ªä»¥å‰æœ‰çš„æŒ‰é’®ï¼Œå¹¶æ”¹æˆæˆ‘ä»¬çš„actionsé‡Œçš„æ–¹æ³•åï¼Œåˆ†åˆ«æ˜¯ï¼š<code>addAction</code>å’Œ<code>reduceAction</code>ã€‚</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">@click</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">addAction</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">+</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">@click</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">reduceAction</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">-</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>æ”¹é€ ä¸€ä¸‹æˆ‘ä»¬çš„methodsæ–¹æ³•ï¼Œé¦–å…ˆè¿˜æ˜¯ç”¨æ‰©å±•è¿ç®—ç¬¦æŠŠ<code>mapMutations</code>å’Œ<code>mapActions</code>åŠ å…¥ã€‚</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">methods</span><span style="color:#89DDFF;">:{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">...</span><span style="color:#82AAFF;">mapMutations</span><span style="color:#F07178;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">add</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">reduce</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">])</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">...</span><span style="color:#82AAFF;">mapActions</span><span style="color:#F07178;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">addAction</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">reduceAction</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">])</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>ä½ è¿˜è¦è®°å¾—ç”¨importæŠŠæˆ‘ä»¬çš„mapActionså¼•å…¥æ‰å¯ä»¥ä½¿ç”¨ã€‚</p><p><strong>å¢åŠ å¼‚æ­¥æ£€éªŒ</strong></p><p>æˆ‘ä»¬ç°åœ¨çœ‹çš„æ•ˆæœå’Œæˆ‘ä»¬ç”¨Mutationsä½œçš„ä¸€æ¨¡ä¸€æ ·ï¼Œè‚¯å®šæœ‰çš„å°ä¼™ä¼´ä¼šå¥½å¥‡ï¼Œé‚£actionsæœ‰ä»€ä¹ˆç”¨ï¼Œæˆ‘ä»¬ä¸ºäº†æ¼”ç¤ºactionsçš„å¼‚æ­¥åŠŸèƒ½ï¼Œæˆ‘ä»¬å¢åŠ ä¸€ä¸ªè®¡æ—¶å™¨ï¼ˆ<code>setTimeOut</code>ï¼‰å»¶è¿Ÿæ‰§è¡Œã€‚åœ¨<code>addAction</code>é‡Œä½¿ç”¨<code>setTimeOut</code>è¿›è¡Œå»¶è¿Ÿæ‰§è¡Œã€‚</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">setTimeOut</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">commit</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">reduce</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3000</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æˆ‘æ¯”reduceæå‰æ‰§è¡Œ</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨æ§åˆ¶å°å…ˆæ‰“å°å‡ºäº†â€˜æˆ‘æ¯”reduceæå‰æ‰§è¡Œâ€™è¿™å¥è¯ã€‚</p><h2 id="module-æ¨¡å—ç»„" tabindex="-1"><code>module</code> æ¨¡å—ç»„ <a class="header-anchor" href="#module-æ¨¡å—ç»„">Â¶</a></h2><p>éšç€é¡¹ç›®çš„å¤æ‚æ€§å¢åŠ ï¼Œæˆ‘ä»¬å…±äº«çš„çŠ¶æ€è¶Šæ¥è¶Šå¤šï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦æŠŠæˆ‘ä»¬çŠ¶æ€çš„å„ç§æ“ä½œè¿›è¡Œä¸€ä¸ªåˆ†ç»„ï¼Œåˆ†ç»„åå†è¿›è¡ŒæŒ‰ç»„ç¼–å†™ã€‚é‚£ä»Šå¤©æˆ‘ä»¬å°±å­¦ä¹ ä¸€ä¸‹moduleï¼šçŠ¶æ€ç®¡ç†å™¨çš„æ¨¡å—ç»„æ“ä½œã€‚</p><p><strong>å£°æ˜æ¨¡å—ç»„ï¼š</strong></p><p>åœ¨<code>vuex/store.js</code>ä¸­å£°æ˜æ¨¡å—ç»„ï¼Œæˆ‘ä»¬è¿˜æ˜¯ç”¨æˆ‘ä»¬çš„<code>const</code>å¸¸é‡çš„æ–¹æ³•å£°æ˜æ¨¡å—ç»„ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> moduleA </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    state</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> mutations</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> getters</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> actions</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>å£°æ˜å¥½åï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹åŸæ¥ <code>Vuex.Stroe</code>é‡Œçš„å€¼ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> Vuex</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Store</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">modules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> moduleA</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p><strong>åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨</strong> ç°åœ¨æˆ‘ä»¬è¦åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨countçŠ¶æ€ï¼Œè¦ç”¨æ’å€¼çš„å½¢å¼å†™å…¥ã€‚</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h3</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">{{$store.state.a.count}}</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h3</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>å¦‚æœæƒ³ç”¨ç®€å•çš„æ–¹æ³•å¼•å…¥ï¼Œè¿˜æ˜¯è¦åœ¨æˆ‘ä»¬çš„è®¡ç®—å±æ€§ä¸­<code>rutrun</code>æˆ‘ä»¬çš„çŠ¶æ€ã€‚å†™æ³•å¦‚ä¸‹ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">computed</span><span style="color:#89DDFF;">:{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">count</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">$store</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div>`,109),e=[o];function t(c,r,D,F,y,i){return n(),a("div",null,e)}const A=s(p,[["render",t]]);export{d as __pageData,A as default};
